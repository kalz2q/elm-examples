<!DOCTYPE html>
<html lang="ja">
<!-- learning firebase through dotinstall  -->
<!-- firechat002 trying to set data in array -->

<head>
    <meta charset="utf-8">
    <title>FireChat002</title>
</head>

<body>
    <main>Chat App</main>
    <form autocomplete="off">
        <input type="text" id="message" placeholder="your message...">
    </form>

    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/6.4.2/firebase-auth.js"></script>


    <script>
        // Your web app's Firebase configuration
        var firebaseConfig = {
            apiKey: "AIzaSyAcGKXBceLoU_TL0HUB49jwf2wBT3fwhRw",
            authDomain: "chat001-a4a95.firebaseapp.com",
            databaseURL: "https://chat001-a4a95.firebaseio.com",
            projectId: "chat001-a4a95",
            storageBucket: "",
            messagingSenderId: "929149012971",
            appId: "1:929149012971:web:d02e11cc0a521bb1"
        };
        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);


        const db = firebase.firestore();
        const collection = db.collection('messages');
        // messagesがあれば使う、なければ出来る


        const message = document.getElementById('message');
        const form = document.querySelector('form');

        form.addEventListener('submit', e => {
            e.preventDefault();


            collection.add({
                message: message.value
            })
                .then(doc => {
                    console.log(`${doc.id} added!`);
                    message.value = '';
                    message.focus();
                })
                .catch(error => {
                    console.log(error);
                });
        });

        message.focus();

    </script>
</body>

</html>